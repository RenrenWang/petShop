Object.defineProperty(exports, "__esModule", {
    value: true
});
var _jsxFileName = '/Volumes/work/reactnative/petShop/js/page/AddShippingAddress.js';

var _react = require('react');

var _react2 = babelHelpers.interopRequireDefault(_react);

var _reactNative = require('react-native');

var _config = require('../config');

var _config2 = babelHelpers.interopRequireDefault(_config);

var _StyleConfig = require('../base/StyleConfig');

var _StyleConfig2 = babelHelpers.interopRequireDefault(_StyleConfig);

var _NavBar = require('../components/NavBar');

var _NavBar2 = babelHelpers.interopRequireDefault(_NavBar);

var _Dimensions$get = _reactNative.Dimensions.get('window'),
    width = _Dimensions$get.width,
    height = _Dimensions$get.height;

var AddShippingAddress = function (_React$Component) {
    babelHelpers.inherits(AddShippingAddress, _React$Component);

    function AddShippingAddress(props) {
        babelHelpers.classCallCheck(this, AddShippingAddress);

        var _this = babelHelpers.possibleConstructorReturn(this, (AddShippingAddress.__proto__ || Object.getPrototypeOf(AddShippingAddress)).call(this, props));

        _this.placeholderUsername = "请输入用户名";
        _this.placeholderPhoneNumbre = "请输入联系电话";
        _this.placeholderAddrInfo = "请输入详细地址";
        _this.placeholderAddreeZip = "请输入邮政编码";
        _this.state = {
            username: "",
            phoneNumbre: "",
            addrInfo: "",
            defaultAddree: true,
            addreeZip: ""

        };
        return _this;
    }

    babelHelpers.createClass(AddShippingAddress, [{
        key: 'componentDidMount',
        value: function componentDidMount() {

            if (!this.props.navigation.state.params.isAdd) {
                var addree = this.props.navigation.state.params.addree;
                this.setState({
                    username: addree.addrName,
                    phoneNumbre: addree.addrPhone,
                    addrInfo: addree.addrInfo,
                    addreeZip: addree.addrZip,
                    defaultAddree: addree.addrDefaultflag == "Y" ? true : false
                });
            }
        }
    }, {
        key: 'saveAddree',
        value: function saveAddree() {
            var _this2 = this;

            if (!this.state.username || this.state.username.length <= 0) {

                return _reactNative.Alert.alert('', '姓名不能为空', [{ text: '确定', onPress: function onPress() {
                        return console.log('OK Pressed');
                    } }], { cancelable: false });
            }

            if (!this.state.phoneNumbre || this.state.phoneNumbre.length != 11) {

                return _reactNative.Alert.alert('', '手机号格式有误', [{ text: '确定', onPress: function onPress() {
                        return console.log('OK Pressed');
                    } }], { cancelable: false });
            }
            if (!this.state.addrInfo || this.state.addrInfo.length <= 0) {

                return _reactNative.Alert.alert('', '地址不能为空', [{ text: '确定', onPress: function onPress() {
                        return console.log('OK Pressed');
                    } }], { cancelable: false });
            }
            if (!this.state.addreeZip || this.state.addreeZip.length <= 0) {

                return _reactNative.Alert.alert('', '邮编不能为空', [{ text: '确定', onPress: function onPress() {
                        return console.log('OK Pressed');
                    } }], { cancelable: false });
            }

            var isAdd = this.props.navigation.state.params.isAdd;
            var msg = !isAdd ? '修改成功' : '地址添加成功';
            var url = !isAdd ? _config2.default.UPDATEADDREE + this.props.screenProps.user.pinfoId + '&addrIds=' + this.props.navigation.state.params.addree.addrIds + '&addrName=' + this.state.username + '&addrPhone=' + this.state.phoneNumbre + '&addrInfo=' + this.state.addrInfo + '&addrZip=' + this.state.addreeZip + '&addrDefaultflag=' + (this.state.defaultAddree ? "Y" : "N") : _config2.default.ADDADDREE + this.props.screenProps.user.pinfoId + '&' + 'addrName=' + this.state.username + '&addrPhone=' + this.state.phoneNumbre + '&addrInfo=' + this.state.addrInfo + '&addrZip=' + this.state.addreeZip + '&addrDefaultflag=' + (this.state.defaultAddree ? "Y" : "N");
            fetch(url).then(function (response) {
                return response.json();
            }).then(function (responseJson) {
                if (responseJson.result == "success") {
                    if (!isAdd) _reactNative.DeviceEventEmitter.emit('ordeRChange', "收货地址更新");
                    return _reactNative.Alert.alert('', msg, [{ text: '确定', onPress: function onPress() {
                            return _this2.props.navigation.goBack();
                        } }], { cancelable: false });
                }
            });
        }
    }, {
        key: 'render',
        value: function render() {
            var _this3 = this;

            return _react2.default.createElement(
                _reactNative.View,
                { style: { flex: 1 }, __source: {
                        fileName: _jsxFileName,
                        lineNumber: 146
                    }
                },
                _react2.default.createElement(_NavBar2.default, {
                    title: this.props.navigation.state.params.isAdd ? "添加收货地址" : "编辑收货地址",
                    navBarbgColor: _StyleConfig2.default.colors.mainColor,
                    navBarLeft: true,
                    navBarLeftAction: function navBarLeftAction() {
                        return _this3.props.navigation.goBack();
                    },

                    __source: {
                        fileName: _jsxFileName,
                        lineNumber: 147
                    }
                }),
                _react2.default.createElement(
                    _reactNative.View,
                    { style: { paddingHorizontal: 15, backgroundColor: '#fff' }, __source: {
                            fileName: _jsxFileName,
                            lineNumber: 154
                        }
                    },
                    _react2.default.createElement(
                        _reactNative.View,
                        { style: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', borderBottomColor: _StyleConfig2.default.colors.lineColor, borderBottomWidth: 1 }, __source: {
                                fileName: _jsxFileName,
                                lineNumber: 155
                            }
                        },
                        _react2.default.createElement(
                            _reactNative.Text,
                            { style: { color: _StyleConfig2.default.colors.blackColor, fontSize: _StyleConfig2.default.fontSize.size_16 }, __source: {
                                    fileName: _jsxFileName,
                                    lineNumber: 156
                                }
                            },
                            '\u59D3\u540D:'
                        ),
                        _react2.default.createElement(_reactNative.TextInput, {
                            underlineColorAndroid: 'transparent',
                            style: { flex: 1, paddingLeft: 10, color: "#999", height: 50 },
                            onChangeText: function onChangeText(username) {
                                return _this3.setState({ username: username });
                            },
                            value: this.state.username,
                            underlineColorAndroid: "transparent",
                            placeholder: this.placeholderUsername,
                            placeholderTextColor: _StyleConfig2.default.colors.hColor,
                            selectionColor: "#999",
                            __source: {
                                fileName: _jsxFileName,
                                lineNumber: 157
                            }
                        })
                    ),
                    _react2.default.createElement(
                        _reactNative.View,
                        { style: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', borderBottomColor: _StyleConfig2.default.colors.lineColor, borderBottomWidth: 1 }, __source: {
                                fileName: _jsxFileName,
                                lineNumber: 169
                            }
                        },
                        _react2.default.createElement(
                            _reactNative.Text,
                            { style: { color: _StyleConfig2.default.colors.blackColor, fontSize: _StyleConfig2.default.fontSize.size_16 }, __source: {
                                    fileName: _jsxFileName,
                                    lineNumber: 170
                                }
                            },
                            '\u8054\u7CFB\u7535\u8BDD:'
                        ),
                        _react2.default.createElement(_reactNative.TextInput, {
                            underlineColorAndroid: 'transparent',
                            style: { flex: 1, paddingLeft: 10, color: "#999", height: 50 },
                            onChangeText: function onChangeText(phoneNumbre) {
                                return _this3.setState({ phoneNumbre: phoneNumbre });
                            },
                            value: this.state.phoneNumbre,
                            underlineColorAndroid: "transparent",
                            placeholder: this.placeholderPhoneNumbre,
                            placeholderTextColor: _StyleConfig2.default.colors.hColor,
                            selectionColor: "#999",
                            __source: {
                                fileName: _jsxFileName,
                                lineNumber: 171
                            }
                        })
                    ),
                    _react2.default.createElement(
                        _reactNative.View,
                        { style: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', borderBottomColor: _StyleConfig2.default.colors.lineColor, borderBottomWidth: 1 }, __source: {
                                fileName: _jsxFileName,
                                lineNumber: 183
                            }
                        },
                        _react2.default.createElement(
                            _reactNative.Text,
                            { style: { color: _StyleConfig2.default.colors.blackColor, fontSize: _StyleConfig2.default.fontSize.size_16 }, __source: {
                                    fileName: _jsxFileName,
                                    lineNumber: 184
                                }
                            },
                            '\u8BE6\u7EC6\u5730\u5740:'
                        ),
                        _react2.default.createElement(_reactNative.TextInput, {
                            underlineColorAndroid: 'transparent',
                            style: { flex: 1, paddingLeft: 10, color: "#999", height: 50 },
                            onChangeText: function onChangeText(addrInfo) {
                                return _this3.setState({ addrInfo: addrInfo });
                            },
                            value: this.state.addrInfo,
                            underlineColorAndroid: "transparent",
                            placeholder: this.placeholderAddrInfo,
                            placeholderTextColor: _StyleConfig2.default.colors.hColor,
                            selectionColor: "#999",
                            __source: {
                                fileName: _jsxFileName,
                                lineNumber: 185
                            }
                        })
                    ),
                    _react2.default.createElement(
                        _reactNative.View,
                        { style: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', borderBottomColor: _StyleConfig2.default.colors.lineColor, borderBottomWidth: 1 }, __source: {
                                fileName: _jsxFileName,
                                lineNumber: 197
                            }
                        },
                        _react2.default.createElement(
                            _reactNative.Text,
                            { style: { color: _StyleConfig2.default.colors.blackColor, fontSize: _StyleConfig2.default.fontSize.size_16 }, __source: {
                                    fileName: _jsxFileName,
                                    lineNumber: 198
                                }
                            },
                            '\u90AE\u653F\u7F16\u7801:'
                        ),
                        _react2.default.createElement(_reactNative.TextInput, {
                            underlineColorAndroid: 'transparent',
                            style: { flex: 1, paddingLeft: 10, color: "#999", height: 50 },
                            onChangeText: function onChangeText(addreeZip) {
                                return _this3.setState({ addreeZip: addreeZip });
                            },
                            value: this.state.addreeZip,
                            underlineColorAndroid: "transparent",
                            placeholder: this.placeholderAddreeZip,
                            placeholderTextColor: _StyleConfig2.default.colors.hColor,
                            selectionColor: "#999",
                            __source: {
                                fileName: _jsxFileName,
                                lineNumber: 199
                            }
                        })
                    ),
                    _react2.default.createElement(
                        _reactNative.View,
                        { style: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', borderBottomColor: _StyleConfig2.default.colors.lineColor, borderBottomWidth: 1 }, __source: {
                                fileName: _jsxFileName,
                                lineNumber: 211
                            }
                        },
                        _react2.default.createElement(
                            _reactNative.Text,
                            { style: { color: _StyleConfig2.default.colors.blackColor, fontSize: _StyleConfig2.default.fontSize.size_16 }, __source: {
                                    fileName: _jsxFileName,
                                    lineNumber: 212
                                }
                            },
                            '\u8BBE\u7F6E\u4E3A\u9ED8\u8BA4\u5730\u5740:'
                        ),
                        _react2.default.createElement(
                            _reactNative.View,
                            { style: { flex: 1 }, __source: {
                                    fileName: _jsxFileName,
                                    lineNumber: 213
                                }
                            },
                            _react2.default.createElement(
                                _reactNative.TouchableOpacity,
                                {
                                    activeOpacity: 1,
                                    onPress: function onPress() {
                                        return _this3.setState({ defaultAddree: !_this3.state.defaultAddree });
                                    }, style: { height: 50, width: 66, alignItems: 'center', justifyContent: 'center' }, __source: {
                                        fileName: _jsxFileName,
                                        lineNumber: 215
                                    }
                                },
                                this.state.defaultAddree ? _react2.default.createElement(_reactNative.Image, { source: require('../static/images/check.png'), style: { height: 18, width: 18 }, __source: {
                                        fileName: _jsxFileName,
                                        lineNumber: 217
                                    }
                                }) : _react2.default.createElement(_reactNative.Image, { source: require('../static/images/unCheck.png'), style: { height: 18, width: 18 }, __source: {
                                        fileName: _jsxFileName,
                                        lineNumber: 217
                                    }
                                })
                            )
                        )
                    )
                ),
                _react2.default.createElement(
                    _reactNative.TouchableOpacity,
                    {
                        activeOpacity: 1,
                        onPress: this.saveAddree.bind(this),
                        style: { marginTop: 30, height: 45, width: width - 20, marginHorizontal: 10, backgroundColor: _StyleConfig2.default.colors.mainColor, justifyContent: 'center', alignItems: 'center' },
                        __source: {
                            fileName: _jsxFileName,
                            lineNumber: 224
                        }
                    },
                    _react2.default.createElement(
                        _reactNative.Text,
                        { style: { color: '#fff', fontSize: _StyleConfig2.default.fontSize.size_16 }, __source: {
                                fileName: _jsxFileName,
                                lineNumber: 229
                            }
                        },
                        '\u4FDD  \u5B58'
                    )
                )
            );
        }
    }]);
    return AddShippingAddress;
}(_react2.default.Component);

exports.default = AddShippingAddress;