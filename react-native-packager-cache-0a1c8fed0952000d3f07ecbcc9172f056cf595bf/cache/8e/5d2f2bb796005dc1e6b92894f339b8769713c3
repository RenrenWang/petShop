Object.defineProperty(exports, "__esModule", {
  value: true
});
var _jsxFileName = '/Volumes/work/reactnative/petShop/js/page/MyPet.js';

var _react = require('react');

var _react2 = babelHelpers.interopRequireDefault(_react);

var _reactNative = require('react-native');

var _lodash = require('lodash');

var _lodash2 = babelHelpers.interopRequireDefault(_lodash);

var _StyleConfig = require('../base/StyleConfig');

var _StyleConfig2 = babelHelpers.interopRequireDefault(_StyleConfig);

var _Tool = require('../util/Tool');

var _Tool2 = babelHelpers.interopRequireDefault(_Tool);

var _config = require('../config');

var _config2 = babelHelpers.interopRequireDefault(_config);

var _reactNativeModalDatetimePicker = require('react-native-modal-datetime-picker');

var _reactNativeModalDatetimePicker2 = babelHelpers.interopRequireDefault(_reactNativeModalDatetimePicker);

var _Loading = require('../components/Loading');

var _Loading2 = babelHelpers.interopRequireDefault(_Loading);

var _Dimensions$get = _reactNative.Dimensions.get('window'),
    width = _Dimensions$get.width,
    height = _Dimensions$get.height;

var MyPet = function (_React$Component) {
  babelHelpers.inherits(MyPet, _React$Component);

  function MyPet(props) {
    babelHelpers.classCallCheck(this, MyPet);

    var _this = babelHelpers.possibleConstructorReturn(this, (MyPet.__proto__ || Object.getPrototypeOf(MyPet)).call(this, props));

    _this._showDateTimePicker = function (n) {
      return _this.setState({ isDateTimePickerVisible: true, type: n });
    };

    _this._hideDateTimePicker = function () {
      return _this.setState({ isDateTimePickerVisible: false });
    };

    _this._handleDatePicked = function (date) {

      if (_this.state.type == 1) {
        _this.setState({
          carDirthday: _Tool2.default.format(date, true)
        });
      } else {
        _this.setState({
          formatcarEntertime: _Tool2.default.format(date, true)
        });
      }

      _this._hideDateTimePicker();
    };

    _this.placeholderPetName = "请输入宠物的名字";
    _this.placeholderPetBreed = "请输入宠物的品种";
    _this.state = {
      petName: "",
      petBreed: '',
      isDateTimePickerVisible: false,
      carDirthday: "请输入宠物生日",
      formatcarEntertime: "选填",
      sex: true,
      type: 1,
      isLogin: true
    };
    return _this;
  }

  babelHelpers.createClass(MyPet, [{
    key: 'componentDidMount',
    value: function componentDidMount() {
      var _this2 = this;

      fetch(_config2.default.MYPET + this.props.screenProps.user.pinfoId).then(function (response) {
        return response.json();
      }).then(function (responseJson) {
        if (responseJson.result == "success") {
          _this2.setState({
            data: responseJson.data[0],
            petName: responseJson.data[0].carName,
            petBreed: responseJson.data[0].carClass,
            carDirthday: _Tool2.default.format(responseJson.data[0].carDirthday, true),
            formatcarEntertime: _Tool2.default.format(responseJson.data[0].formatcarEntertime, true),
            sex: responseJson.data[0].carSex == "男" || responseJson.data[0].carSex == "性别" ? true : false
          });
        }
        _this2.setState({
          isLogin: false
        });
      });
    }
  }, {
    key: 'save',
    value: function save() {
      fetch(_config2.default.MYPET + this.props.screenProps.user.pinfoId + '&dataType=SAVE&carName=' + this.state.petName + '&carSex=' + (this.state.sex ? "男" : '女') + '&carClass=' + this.state.petBreed + '&carDirthday=' + this.state.carDirthday + '&carEntertime=' + this.state.formatcarEntertime).then(function (response) {
        return response.json();
      }).then(function (responseJson) {
        if (responseJson.result == "success") {

          _reactNative.Alert.alert('', "保存成功", [{ text: '确定', onPress: function onPress() {
              return console.log('OK Pressed');
            } }], { cancelable: false });
        }
      });
    }
  }, {
    key: 'selectSex',
    value: function selectSex(sex) {
      this.setState({
        sex: sex
      });
    }
  }, {
    key: 'render',
    value: function render() {
      var _this3 = this;

      console.log("formatcarEntertime---->" + this.state.formatcarEntertime);
      return !this.state.isLogin ? _react2.default.createElement(
        _reactNative.ScrollView,
        {
          horizontal: false,
          style: { flex: 1, flexDirection: 'column' }, __source: {
            fileName: _jsxFileName,
            lineNumber: 115
          }
        },
        _react2.default.createElement(_reactNativeModalDatetimePicker2.default, {
          isVisible: this.state.isDateTimePickerVisible,
          onConfirm: this._handleDatePicked,
          onCancel: this._hideDateTimePicker,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 118
          }
        }),
        _react2.default.createElement(
          _reactNative.View,
          { style: { height: 160, alignItems: 'center', justifyContent: 'center' }, __source: {
              fileName: _jsxFileName,
              lineNumber: 123
            }
          },
          _react2.default.createElement(
            _reactNative.View,
            { style: { position: 'relative', alignItems: 'center', justifyContent: 'center' }, __source: {
                fileName: _jsxFileName,
                lineNumber: 124
              }
            },
            _react2.default.createElement(_reactNative.Image, { style: { height: 100, width: 100, position: 'relative', top: 5 }, source: require('../static/images/petAvatar.png'), __source: {
                fileName: _jsxFileName,
                lineNumber: 125
              }
            }),
            _react2.default.createElement(_reactNative.Image, { style: { height: 16, width: 20, position: 'absolute', right: 8, bottom: 0 }, source: require('../static/images/camera.png'), __source: {
                fileName: _jsxFileName,
                lineNumber: 126
              }
            })
          )
        ),
        _react2.default.createElement(
          _reactNative.View,
          { style: { flexDirection: 'column', flex: 1, backgroundColor: '#fff' }, __source: {
              fileName: _jsxFileName,
              lineNumber: 130
            }
          },
          _react2.default.createElement(
            _reactNative.View,
            { style: { paddingHorizontal: 15 }, __source: {
                fileName: _jsxFileName,
                lineNumber: 131
              }
            },
            _react2.default.createElement(
              _reactNative.View,
              { style: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', borderBottomColor: _StyleConfig2.default.colors.lineColor, borderBottomWidth: 1 }, __source: {
                  fileName: _jsxFileName,
                  lineNumber: 132
                }
              },
              _react2.default.createElement(
                _reactNative.Text,
                { style: { color: _StyleConfig2.default.colors.blackColor, fontSize: _StyleConfig2.default.fontSize.size_16 }, __source: {
                    fileName: _jsxFileName,
                    lineNumber: 133
                  }
                },
                '\u5BA0\u7269\u540D\u79F0'
              ),
              _react2.default.createElement(_reactNative.TextInput, {
                underlineColorAndroid: 'transparent',
                style: { paddingLeft: 10, textAlign: 'right', color: "#999", width: 130, height: 50, alignSelf: 'flex-end' },
                onChangeText: function onChangeText(petName) {
                  return _this3.setState({ petName: petName });
                },
                value: this.state.petName,
                underlineColorAndroid: "transparent",
                placeholder: this.placeholderPetName,
                placeholderTextColor: _StyleConfig2.default.colors.hColor,
                selectionColor: "#999",
                __source: {
                  fileName: _jsxFileName,
                  lineNumber: 134
                }
              })
            )
          ),
          _react2.default.createElement(
            _reactNative.View,
            { style: { paddingHorizontal: 15, backgroundColor: '#fff' }, __source: {
                fileName: _jsxFileName,
                lineNumber: 147
              }
            },
            _react2.default.createElement(
              _reactNative.View,
              { style: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', borderBottomColor: _StyleConfig2.default.colors.lineColor, borderBottomWidth: 1 }, __source: {
                  fileName: _jsxFileName,
                  lineNumber: 148
                }
              },
              _react2.default.createElement(
                _reactNative.Text,
                { style: { color: _StyleConfig2.default.colors.blackColor, fontSize: _StyleConfig2.default.fontSize.size_16 }, __source: {
                    fileName: _jsxFileName,
                    lineNumber: 149
                  }
                },
                '\u5BA0\u7269\u6027\u522B'
              ),
              _react2.default.createElement(
                _reactNative.View,
                {
                  style: { flexDirection: 'row', alignItems: 'center', paddingLeft: 10, width: 130, height: 50, alignSelf: 'flex-end', justifyContent: 'flex-end' },
                  __source: {
                    fileName: _jsxFileName,
                    lineNumber: 150
                  }
                },
                _react2.default.createElement(
                  _reactNative.TouchableOpacity,
                  {
                    onPress: this.selectSex.bind(this, true),
                    activeOpacity: 1,
                    style: { marginHorizontal: 5 },
                    __source: {
                      fileName: _jsxFileName,
                      lineNumber: 153
                    }
                  },
                  _react2.default.createElement(_reactNative.Image, { style: { tintColor: this.state.sex ? "#548bee" : _StyleConfig2.default.colors.hColor, width: 40 / 1.8, height: 50 / 1.8 }, source: require('../static/images/sex.png'), __source: {
                      fileName: _jsxFileName,
                      lineNumber: 158
                    }
                  })
                ),
                _react2.default.createElement(
                  _reactNative.TouchableOpacity,
                  {
                    onPress: this.selectSex.bind(this, false),
                    activeOpacity: 1,
                    style: { marginHorizontal: 5 },
                    __source: {
                      fileName: _jsxFileName,
                      lineNumber: 160
                    }
                  },
                  _react2.default.createElement(_reactNative.Image, { style: { tintColor: !this.state.sex ? _StyleConfig2.default.colors.mainColor : _StyleConfig2.default.colors.hColor, width: 40 / 1.8, height: 50 / 1.8 }, source: require('../static/images/sex.png'), __source: {
                      fileName: _jsxFileName,
                      lineNumber: 165
                    }
                  })
                )
              )
            )
          ),
          _react2.default.createElement(
            _reactNative.View,
            { style: { paddingHorizontal: 15, backgroundColor: '#fff' }, __source: {
                fileName: _jsxFileName,
                lineNumber: 171
              }
            },
            _react2.default.createElement(
              _reactNative.View,
              { style: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', borderBottomColor: _StyleConfig2.default.colors.lineColor, borderBottomWidth: 1 }, __source: {
                  fileName: _jsxFileName,
                  lineNumber: 172
                }
              },
              _react2.default.createElement(
                _reactNative.Text,
                { style: { color: _StyleConfig2.default.colors.blackColor, fontSize: _StyleConfig2.default.fontSize.size_16 }, __source: {
                    fileName: _jsxFileName,
                    lineNumber: 173
                  }
                },
                '\u5BA0\u7269\u54C1\u79CD'
              ),
              _react2.default.createElement(_reactNative.TextInput, {
                underlineColorAndroid: 'transparent',
                style: { paddingLeft: 10, textAlign: 'right', color: "#999", width: 130, height: 50, alignSelf: 'flex-end' },
                onChangeText: function onChangeText(petBreed) {
                  return _this3.setState({ petBreed: petBreed });
                },
                value: this.state.petBreed,
                underlineColorAndroid: "transparent",
                placeholder: this.placeholderPetBreed,
                placeholderTextColor: _StyleConfig2.default.colors.hColor,
                selectionColor: "#999",
                __source: {
                  fileName: _jsxFileName,
                  lineNumber: 174
                }
              })
            )
          ),
          _react2.default.createElement(
            _reactNative.View,
            { style: { paddingHorizontal: 15, backgroundColor: '#fff' }, __source: {
                fileName: _jsxFileName,
                lineNumber: 187
              }
            },
            _react2.default.createElement(
              _reactNative.TouchableOpacity,
              {
                activeOpacity: 1,
                onPress: this._showDateTimePicker.bind(this, 1), style: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', borderBottomColor: _StyleConfig2.default.colors.lineColor, borderBottomWidth: 1 }, __source: {
                  fileName: _jsxFileName,
                  lineNumber: 188
                }
              },
              _react2.default.createElement(
                _reactNative.Text,
                { style: { color: _StyleConfig2.default.colors.blackColor, fontSize: _StyleConfig2.default.fontSize.size_16 }, __source: {
                    fileName: _jsxFileName,
                    lineNumber: 191
                  }
                },
                '\u5BA0\u7269\u751F\u65E5'
              ),
              _react2.default.createElement(
                _reactNative.View,
                {
                  style: { flexDirection: 'row', alignItems: 'center', paddingLeft: 10, width: 130, height: 50, alignSelf: 'flex-end', justifyContent: 'flex-end' },
                  __source: {
                    fileName: _jsxFileName,
                    lineNumber: 192
                  }
                },
                _react2.default.createElement(
                  _reactNative.Text,
                  { style: { color: _StyleConfig2.default.colors.hColor, fontSize: _StyleConfig2.default.fontSize.size_14 }, __source: {
                      fileName: _jsxFileName,
                      lineNumber: 195
                    }
                  },
                  this.state.carDirthday
                ),
                _react2.default.createElement(_reactNative.Image, { style: { tintColor: _StyleConfig2.default.colors.hColor, height: 16, width: 16 }, source: require('../static/images/rightArrow.png'), __source: {
                    fileName: _jsxFileName,
                    lineNumber: 197
                  }
                })
              )
            )
          ),
          _react2.default.createElement(
            _reactNative.View,
            { style: { paddingHorizontal: 15, backgroundColor: '#fff' }, __source: {
                fileName: _jsxFileName,
                lineNumber: 202
              }
            },
            _react2.default.createElement(
              _reactNative.TouchableOpacity,
              {
                activeOpacity: 1,
                onPress: this._showDateTimePicker.bind(this, 2), style: { flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', borderBottomColor: _StyleConfig2.default.colors.lineColor, borderBottomWidth: 1 }, __source: {
                  fileName: _jsxFileName,
                  lineNumber: 203
                }
              },
              _react2.default.createElement(
                _reactNative.Text,
                { style: { color: _StyleConfig2.default.colors.blackColor, fontSize: _StyleConfig2.default.fontSize.size_16 }, __source: {
                    fileName: _jsxFileName,
                    lineNumber: 206
                  }
                },
                '\u8FDB\u5BB6\u65F6\u95F4'
              ),
              _react2.default.createElement(
                _reactNative.View,
                {
                  style: { flexDirection: 'row', alignItems: 'center', paddingLeft: 10, width: 130, height: 50, alignSelf: 'flex-end', justifyContent: 'flex-end' },
                  __source: {
                    fileName: _jsxFileName,
                    lineNumber: 207
                  }
                },
                _react2.default.createElement(
                  _reactNative.Text,
                  { style: { color: _StyleConfig2.default.colors.hColor, fontSize: _StyleConfig2.default.fontSize.size_14 }, __source: {
                      fileName: _jsxFileName,
                      lineNumber: 210
                    }
                  },
                  this.state.formatcarEntertime
                ),
                _react2.default.createElement(_reactNative.Image, { style: { tintColor: _StyleConfig2.default.colors.hColor, height: 16, width: 16 }, source: require('../static/images/rightArrow.png'), __source: {
                    fileName: _jsxFileName,
                    lineNumber: 212
                  }
                })
              )
            )
          )
        ),
        _react2.default.createElement(
          _reactNative.TouchableOpacity,
          {
            activeOpacity: 1,
            onPress: this.save.bind(this),
            style: { alignSelf: 'center', borderRadius: 10, marginTop: 25, height: 45, width: width * 0.9, backgroundColor: _StyleConfig2.default.colors.mainColor, justifyContent: 'center', alignItems: 'center' },
            __source: {
              fileName: _jsxFileName,
              lineNumber: 219
            }
          },
          _react2.default.createElement(
            _reactNative.Text,
            { style: { color: '#fff', fontSize: _StyleConfig2.default.fontSize.size_16 }, __source: {
                fileName: _jsxFileName,
                lineNumber: 224
              }
            },
            '\u4FDD  \u5B58'
          )
        )
      ) : _react2.default.createElement(_Loading2.default, {
        __source: {
          fileName: _jsxFileName,
          lineNumber: 227
        }
      });
    }
  }]);
  return MyPet;
}(_react2.default.Component);

exports.default = MyPet;