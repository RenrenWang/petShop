Object.defineProperty(exports, "__esModule", {
    value: true
});
var _jsxFileName = '/Volumes/work/reactnative/petShop/js/page/ShippingAddress.js';

var _react = require('react');

var _react2 = babelHelpers.interopRequireDefault(_react);

var _reactNative = require('react-native');

var _lodash = require('lodash');

var _lodash2 = babelHelpers.interopRequireDefault(_lodash);

var _config = require('../config');

var _config2 = babelHelpers.interopRequireDefault(_config);

var _StyleConfig = require('../base/StyleConfig');

var _StyleConfig2 = babelHelpers.interopRequireDefault(_StyleConfig);

var _NavBar = require('../components/NavBar');

var _NavBar2 = babelHelpers.interopRequireDefault(_NavBar);

var _Dimensions$get = _reactNative.Dimensions.get('window'),
    width = _Dimensions$get.width,
    height = _Dimensions$get.height;

var ShippingAddress = function (_React$Component) {
    babelHelpers.inherits(ShippingAddress, _React$Component);

    function ShippingAddress(props) {
        babelHelpers.classCallCheck(this, ShippingAddress);

        var _this = babelHelpers.possibleConstructorReturn(this, (ShippingAddress.__proto__ || Object.getPrototypeOf(ShippingAddress)).call(this, props));

        _this.state = {
            list: []
        };
        return _this;
    }

    babelHelpers.createClass(ShippingAddress, [{
        key: 'componentDidMount',
        value: function componentDidMount() {
            var _this2 = this;

            this.subscription = _reactNative.DeviceEventEmitter.addListener('addreeChange', function () {
                _this2.getData();
            });
            this.getData();
        }
    }, {
        key: 'componentWillUnmount',
        value: function componentWillUnmount() {
            this.subscription.remove();
        }
    }, {
        key: 'getData',
        value: function getData() {
            var _this3 = this;

            fetch(_config2.default.SHOWADDREE + this.props.screenProps.user.pinfoId).then(function (response) {
                return response.json();
            }).then(function (responseJson) {
                if (responseJson.result == "success") {
                    _this3.setState({
                        list: responseJson.data
                    });
                }
            });
        }
    }, {
        key: '_renderItem',
        value: function _renderItem(item) {
            return _react2.default.createElement(FlatListItem, {
                item: item,
                navigation: this.props.navigation,
                __source: {
                    fileName: _jsxFileName,
                    lineNumber: 62
                }
            });
        }
    }, {
        key: 'render',
        value: function render() {
            var _this4 = this;

            return _react2.default.createElement(
                _reactNative.View,
                { style: { flex: 1 }, __source: {
                        fileName: _jsxFileName,
                        lineNumber: 70
                    }
                },
                _react2.default.createElement(_NavBar2.default, {
                    title: "收货地址",
                    navBarbgColor: _StyleConfig2.default.colors.mainColor,
                    navBarLeft: true,
                    navBarLeftAction: function navBarLeftAction() {
                        return _this4.props.navigation.goBack();
                    },
                    navBarRight: function navBarRight() {
                        return _this4.state.list.length <= 0 ? _react2.default.createElement(
                            _reactNative.Text,
                            { style: { fontSize: _StyleConfig2.default.fontSize.size_14, color: "#fff" }, __source: {
                                    fileName: _jsxFileName,
                                    lineNumber: 76
                                }
                            },
                            '\u65B0\u589E'
                        ) : null;
                    },
                    navBarRightAction: _lodash2.default.throttle(function () {
                        return _this4.props.navigation.navigate("AddShippingAddress", { isAdd: true });
                    }, 1000, {

                        'trailing': false
                    }),
                    __source: {
                        fileName: _jsxFileName,
                        lineNumber: 71
                    }
                }),
                this.state.list.length <= 0 ? _react2.default.createElement(
                    _reactNative.View,
                    { style: { flexDirection: 'column', alignItems: 'center', height: height * 0.6, justifyContent: 'center' }, __source: {
                            fileName: _jsxFileName,
                            lineNumber: 82
                        }
                    },
                    _react2.default.createElement(_reactNative.Image, { style: { height: 90, width: 93 }, source: require('../static/images/cartcatImg.png'), __source: {
                            fileName: _jsxFileName,
                            lineNumber: 83
                        }
                    }),
                    _react2.default.createElement(
                        _reactNative.Text,
                        { style: { marginTop: 15, textAlign: 'center', paddingVertical: 5, fontSize: _StyleConfig2.default.fontSize.size_14 }, __source: {
                                fileName: _jsxFileName,
                                lineNumber: 84
                            }
                        },
                        '\u4E3B\u4EBA\uFF0C\u60A8\u8FD8\u6CA1\u6709\u6536\u8D27\u5730\u5740\u54E6'
                    )
                ) : _react2.default.createElement(_reactNative.FlatList, {
                    horizontal: false,
                    data: this.state.list,
                    renderItem: function renderItem(_ref) {
                        var item = _ref.item;
                        return _this4._renderItem(item);
                    },
                    keyExtractor: function keyExtractor(item, index) {
                        return index;
                    },
                    __source: {
                        fileName: _jsxFileName,
                        lineNumber: 85
                    }
                }),
                _react2.default.createElement(
                    _reactNative.TouchableOpacity,
                    {
                        activeOpacity: 0.8,
                        style: { margin: 25, borderRadius: 5, borderColor: _StyleConfig2.default.colors.mainColor, borderWidth: 1, height: 45, alignItems: 'center', justifyContent: 'center' },
                        onPress: _lodash2.default.throttle(function () {
                            return _this4.props.navigation.navigate("AddShippingAddress", { isAdd: true });
                        }, 1000, {

                            'trailing': false
                        }),
                        __source: {
                            fileName: _jsxFileName,
                            lineNumber: 91
                        }
                    },
                    _react2.default.createElement(
                        _reactNative.Text,
                        { style: { color: _StyleConfig2.default.colors.mainColor, fontSize: 16 }, __source: {
                                fileName: _jsxFileName,
                                lineNumber: 99
                            }
                        },
                        '\u65B0\u589E\u5730\u5740'
                    )
                )
            );
        }
    }]);
    return ShippingAddress;
}(_react2.default.Component);

exports.default = ShippingAddress;

var FlatListItem = function (_React$PureComponent) {
    babelHelpers.inherits(FlatListItem, _React$PureComponent);

    function FlatListItem(props) {
        babelHelpers.classCallCheck(this, FlatListItem);
        return babelHelpers.possibleConstructorReturn(this, (FlatListItem.__proto__ || Object.getPrototypeOf(FlatListItem)).call(this, props));
    }

    babelHelpers.createClass(FlatListItem, [{
        key: 'render',
        value: function render() {
            var _this6 = this;

            var item = this.props.item;
            return _react2.default.createElement(
                _reactNative.View,
                { style: { marginTop: 10, flexDirection: 'row', backgroundColor: '#fff', padding: 10 }, __source: {
                        fileName: _jsxFileName,
                        lineNumber: 116
                    }
                },
                _react2.default.createElement(
                    _reactNative.View,
                    { style: { flexDirection: 'column', width: 55 }, __source: {
                            fileName: _jsxFileName,
                            lineNumber: 117
                        }
                    },
                    _react2.default.createElement(
                        _reactNative.Text,
                        { numberOfLines: 1, style: { alignSelf: 'center', fontSize: _StyleConfig2.default.fontSize.size_16, color: _StyleConfig2.default.colors.blackColor }, __source: {
                                fileName: _jsxFileName,
                                lineNumber: 118
                            }
                        },
                        item.addrName
                    ),
                    item.addrDefaultflag == "Y" ? _react2.default.createElement(
                        _reactNative.Text,
                        { style: { alignSelf: 'center', width: 40, textAlign: 'center', fontSize: _StyleConfig2.default.fontSize.size_12, borderColor: _StyleConfig2.default.colors.mainColor, borderWidth: 1, color: _StyleConfig2.default.colors.mainColor }, __source: {
                                fileName: _jsxFileName,
                                lineNumber: 119
                            }
                        },
                        '\u9ED8\u8BA4'
                    ) : null
                ),
                _react2.default.createElement(
                    _reactNative.View,
                    { style: { flex: 1, flexDirection: 'column', marginHorizontal: 10 }, __source: {
                            fileName: _jsxFileName,
                            lineNumber: 121
                        }
                    },
                    _react2.default.createElement(
                        _reactNative.Text,
                        { style: { fontSize: _StyleConfig2.default.fontSize.size_16, color: _StyleConfig2.default.colors.blackColor }, __source: {
                                fileName: _jsxFileName,
                                lineNumber: 122
                            }
                        },
                        item.addrPhone
                    ),
                    _react2.default.createElement(
                        _reactNative.Text,
                        { style: { color: _StyleConfig2.default.colors.SHCOlor }, __source: {
                                fileName: _jsxFileName,
                                lineNumber: 123
                            }
                        },
                        item.addrInfo
                    )
                ),
                _react2.default.createElement(
                    _reactNative.TouchableOpacity,
                    {
                        activeOpacity: 1,
                        onPress: _lodash2.default.throttle(function () {
                            return _this6.props.navigation.navigate("AddShippingAddress", { "addree": item, isAdd: false });
                        }, 1000, {

                            'trailing': false
                        }), __source: {
                            fileName: _jsxFileName,
                            lineNumber: 126
                        }
                    },
                    _react2.default.createElement(_reactNative.Image, { style: { alignSelf: 'center', tintColor: _StyleConfig2.default.colors.SHCOlor, height: 25, width: 25 }, source: require('../static/images/edit.png'), __source: {
                            fileName: _jsxFileName,
                            lineNumber: 132
                        }
                    })
                )
            );
        }
    }]);
    return FlatListItem;
}(_react2.default.PureComponent);