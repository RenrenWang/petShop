Object.defineProperty(exports, "__esModule", {
  value: true
});
var _jsxFileName = '/Volumes/work/reactnative/petShop/js/page/Me.js';

var _react = require('react');

var _react2 = babelHelpers.interopRequireDefault(_react);

var _reactNative = require('react-native');

var _lodash = require('lodash');

var _lodash2 = babelHelpers.interopRequireDefault(_lodash);

var _StyleConfig = require('../base/StyleConfig');

var _StyleConfig2 = babelHelpers.interopRequireDefault(_StyleConfig);

var _Panel = require('../components/Panel');

var _Panel2 = babelHelpers.interopRequireDefault(_Panel);

var _LoadingImg = require('../components/LoadingImg');

var _LoadingImg2 = babelHelpers.interopRequireDefault(_LoadingImg);

var _Dimensions$get = _reactNative.Dimensions.get('window'),
    width = _Dimensions$get.width,
    height = _Dimensions$get.height;

var Me = function (_React$Component) {
  babelHelpers.inherits(Me, _React$Component);

  function Me(props) {
    babelHelpers.classCallCheck(this, Me);

    var _this = babelHelpers.possibleConstructorReturn(this, (Me.__proto__ || Object.getPrototypeOf(Me)).call(this, props));

    _this.state = {
      isLoading: true,
      isModal: false,
      result: ""
    };
    return _this;
  }

  babelHelpers.createClass(Me, [{
    key: 'toUrl',
    value: function toUrl(routerName, initialPage) {

      if (this.props.screenProps.user) {
        return this.props.navigation.navigate(routerName, { initialPage: initialPage ? initialPage : null });
      } else return _reactNative.Alert.alert('提示', '未登录，请先登录', [{ text: '确定', onPress: function onPress() {
          return console.log('OK Pressed');
        } }], { cancelable: false });
    }
  }, {
    key: 'componentDidMount',
    value: function componentDidMount() {

      this.setState({
        isLoading: false
      });
    }
  }, {
    key: 'renderPayItem',
    value: function renderPayItem(data) {
      var _this2 = this;

      return _react2.default.createElement(
        _reactNative.View,
        { style: { paddingLeft: 10, backgroundColor: '#fff' }, __source: {
            fileName: _jsxFileName,
            lineNumber: 70
          }
        },
        _react2.default.createElement(
          _reactNative.View,
          { style: { paddingRight: 10, height: 45, flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center', borderBottomColor: _StyleConfig2.default.colors.lineColor, borderBottomWidth: 1 }, __source: {
              fileName: _jsxFileName,
              lineNumber: 71
            }
          },
          _react2.default.createElement(
            _reactNative.Text,
            { style: { paddingHorizontal: 10, borderLeftWidth: 3, borderLeftColor: _StyleConfig2.default.colors.mainColor, fontSize: _StyleConfig2.default.fontSize.size_16, color: _StyleConfig2.default.colors.blackColor }, __source: {
                fileName: _jsxFileName,
                lineNumber: 72
              }
            },
            '\u6211\u7684\u8BA2\u5355'
          ),
          _react2.default.createElement(
            _reactNative.TouchableOpacity,
            {
              activeOpacity: 1,
              onPress: _lodash2.default.throttle(this.toUrl.bind(this, 'AllOrderForm', 0), 1000, {

                'trailing': false
              }), __source: {
                fileName: _jsxFileName,
                lineNumber: 73
              }
            },
            _react2.default.createElement(
              _reactNative.Text,
              { style: { fontSize: _StyleConfig2.default.fontSize.size_14 }, __source: {
                  fileName: _jsxFileName,
                  lineNumber: 78
                }
              },
              '\u67E5\u770B\u5168\u90E8\u8BA2\u5355'
            )
          )
        ),
        _react2.default.createElement(
          _reactNative.View,
          { style: { flexDirection: 'row', alignItems: "center", justifyContent: 'center' }, __source: {
              fileName: _jsxFileName,
              lineNumber: 80
            }
          },
          data.map(function (item, index) {
            return _react2.default.createElement(
              _reactNative.TouchableOpacity,
              {
                key: index,
                activeOpacity: 1,
                onPress: _lodash2.default.throttle(_this2.toUrl.bind(_this2, "AllOrderForm", index + 1), 1000, {

                  'trailing': false
                }),
                style: { flex: 1, alignItems: "center", justifyContent: 'center', padding: 8 },
                __source: {
                  fileName: _jsxFileName,
                  lineNumber: 82
                }
              },
              _react2.default.createElement(_reactNative.Image, { style: { height: 35, width: 35 }, source: item.icon, __source: {
                  fileName: _jsxFileName,
                  lineNumber: 91
                }
              }),
              _react2.default.createElement(
                _reactNative.Text,
                { style: { fontSize: _StyleConfig2.default.fontSize.size_13 }, __source: {
                    fileName: _jsxFileName,
                    lineNumber: 92
                  }
                },
                item.name
              )
            );
          })
        )
      );
    }
  }, {
    key: 'renderLinkItem',
    value: function renderLinkItem(data) {
      var _this3 = this;

      return _react2.default.createElement(
        _reactNative.View,
        { style: { marginTop: 10, backgroundColor: '#fff', paddingLeft: 10 }, __source: {
            fileName: _jsxFileName,
            lineNumber: 103
          }
        },
        data.map(function (item, index) {
          return _react2.default.createElement(
            _reactNative.TouchableOpacity,
            {
              key: index,
              activeOpacity: 1,
              onPress: _lodash2.default.throttle(item.action ? item.action : _this3.toUrl.bind(_this3, item.routerName), 1000, {

                'trailing': false
              }),
              style: { borderBottomColor: _StyleConfig2.default.colors.lineColor, borderBottomWidth: 1, flex: 1, flexDirection: 'row', alignItems: "center", paddingVertical: 8 },
              __source: {
                fileName: _jsxFileName,
                lineNumber: 105
              }
            },
            _react2.default.createElement(_reactNative.Image, { style: { height: 35, width: 35 }, source: item.icon, __source: {
                fileName: _jsxFileName,
                lineNumber: 114
              }
            }),
            _react2.default.createElement(
              _reactNative.Text,
              {
                __source: {
                  fileName: _jsxFileName,
                  lineNumber: 115
                }
              },
              item.name
            )
          );
        })
      );
    }
  }, {
    key: '_renderView',
    value: function _renderView() {
      return _react2.default.createElement(
        _reactNative.View,
        { style: { flex: 1, justifyContent: 'center', alignItems: 'center' }, __source: {
            fileName: _jsxFileName,
            lineNumber: 123
          }
        },
        _react2.default.createElement(
          _reactNative.TouchableOpacity,
          {
            activeOpacity: 1,

            style: { borderRadius: 10, width: width * 0.75, height: width * 0.85, backgroundColor: '#fff', justifyContent: 'center', alignItems: 'center' }, __source: {
              fileName: _jsxFileName,
              lineNumber: 124
            }
          },
          _react2.default.createElement(
            _reactNative.View,
            { style: { justifyContent: 'center', alignItems: 'center' }, __source: {
                fileName: _jsxFileName,
                lineNumber: 131
              }
            },
            _react2.default.createElement(
              _reactNative.Text,
              { numberOfLines: 1, style: { color: _StyleConfig2.default.colors.defaultFontColor, fontSize: _StyleConfig2.default.fontSize.size_16 }, __source: {
                  fileName: _jsxFileName,
                  lineNumber: 132
                }
              },
              '\u6DFB\u52A0\u5FAE\u4FE1\u516C\u4F17\u53F7\u8BE2\u95EE'
            ),
            _react2.default.createElement(
              _reactNative.Text,
              { numberOfLines: 2, style: { color: _StyleConfig2.default.colors.hColor, fontSize: _StyleConfig2.default.fontSize.size_14 }, __source: {
                  fileName: _jsxFileName,
                  lineNumber: 133
                }
              },
              '\u6682\u65F6\u672A\u5F00\u901A\u5BA2\u670D'
            )
          ),
          _react2.default.createElement(_reactNative.Image, { style: { width: width * 0.75 * 0.8, height: width * 0.75 * 0.8 }, source: require('../static/images/ercode.png'), __source: {
              fileName: _jsxFileName,
              lineNumber: 135
            }
          })
        )
      );
    }
  }, {
    key: 'renderCustomService',
    value: function renderCustomService() {
      return _react2.default.createElement(_Panel2.default, {
        isModal: this.state.isModal,
        renderView: this._renderView.bind(this),
        _animationType: "fade",
        action: this._actionCustomService.bind(this),
        __source: {
          fileName: _jsxFileName,
          lineNumber: 142
        }
      });
    }
  }, {
    key: '_actionCustomService',
    value: function _actionCustomService() {
      this.setState({
        isModal: !this.state.isModal
      });
    }
  }, {
    key: '_shareText',
    value: function _shareText() {
      var _this4 = this;

      _reactNative.Share.share({
        message: "http://www..com/",
        url: 'http://www.com/',
        title: '艾宠'
      }, {
        dialogTitle: '分享',
        excludedActivityTypes: ['com.apple.UIKit.activity.PostToTwitter'],
        tintColor: 'green'
      }).then(this._showResult).catch(function (error) {
        return _this4.setState({ result: 'error: ' + error.message });
      });
    }
  }, {
    key: '_showResult',
    value: function _showResult(result) {
      if (result.action === _reactNative.Share.sharedAction) {
        if (result.activityType) {
          this.setState({ result: 'shared with an activityType: ' + result.activityType });
        } else {
          this.setState({ result: 'shared' });
        }
      } else if (result.action === _reactNative.Share.dismissedAction) {
        this.setState({ result: 'dismissed' });
      }
    }
  }, {
    key: 'render',
    value: function render() {
      var _this5 = this;

      var user = this.props.screenProps.user;

      var PayList = [{ name: "待支付", routerName: '', icon: require('../static/images/dzf.png') }, { name: "待发货", routerName: '', icon: require('../static/images/dfh.png') }, { name: "待评价", routerName: '', icon: require('../static/images/dpj.png') }, { name: "预定", routerName: '', icon: require('../static/images/yd.png') }];
      var LinkList = [{ name: "我的宠物", routerName: 'MyPet', icon: require('../static/images/myc.png') }, { name: "收货地址", routerName: 'ShippingAddress', icon: require('../static/images/addree.png') }, { name: "推荐分享", routerName: '', icon: require('../static/images/link.png'), action: this._shareText.bind(this) }, { name: "艾宠客服", routerName: '', icon: require('../static/images/kf.png'), action: this._actionCustomService.bind(this) }];
      return _react2.default.createElement(
        _reactNative.ScrollView,
        {
          horizontal: false,
          style: { flex: 1 },
          __source: {
            fileName: _jsxFileName,
            lineNumber: 197
          }
        },
        !this.state.isLoading ? _react2.default.createElement(
          _reactNative.View,
          { style: { flex: 1 }, __source: {
              fileName: _jsxFileName,
              lineNumber: 201
            }
          },
          this.renderCustomService(),
          _react2.default.createElement(
            _reactNative.View,
            {

              style: { position: 'relative', height: height * 0.35, width: width, flexDirection: 'row', alignItems: 'center', justifyContent: 'center' }, __source: {
                fileName: _jsxFileName,
                lineNumber: 207
              }
            },
            _react2.default.createElement(
              _reactNative.View,
              { style: { width: width, height: 40, paddingHorizontal: 5, flexDirection: 'row', alignItems: 'center', justifyContent: 'flex-end', position: 'absolute', zIndex: 10, top: 0 }, __source: {
                  fileName: _jsxFileName,
                  lineNumber: 210
                }
              },
              _react2.default.createElement(
                _reactNative.TouchableOpacity,
                {
                  activeOpacity: 1,
                  onPress: _lodash2.default.throttle(this.toUrl.bind(this, "Setting"), 1000, {

                    'trailing': false
                  }),

                  __source: {
                    fileName: _jsxFileName,
                    lineNumber: 211
                  }
                },
                _react2.default.createElement(_reactNative.Image, { style: { tintColor: '#fff', height: 35, width: 35 }, source: require('../static/images/tool.png'), __source: {
                    fileName: _jsxFileName,
                    lineNumber: 219
                  }
                })
              )
            ),
            _react2.default.createElement(_reactNative.Image, {

              blurRadius: 1,

              source: require('../static/images/meBg.jpg'),
              style: { height: height * 0.45, width: width, position: 'absolute' }, __source: {
                fileName: _jsxFileName,
                lineNumber: 233
              }
            }),
            user ? _react2.default.createElement(
              _reactNative.TouchableOpacity,
              {
                activeOpacity: 1,
                onPress: _lodash2.default.throttle(this.toUrl.bind(this, ""), 1000, {

                  'trailing': false
                }),
                style: { flexDirection: 'column', justifyContent: 'center', alignItems: 'center' }, __source: {
                  fileName: _jsxFileName,
                  lineNumber: 242
                }
              },
              _react2.default.createElement(_reactNative.Image, {
                style: { height: 65, width: 65, borderRadius: 65 / 2 }, source: require('../static/images/avatar.png'), __source: {
                  fileName: _jsxFileName,
                  lineNumber: 249
                }
              }),
              _react2.default.createElement(
                _reactNative.Text,
                { style: { marginVertical: 8, fontSize: _StyleConfig2.default.fontSize.size_14, color: '#fff' }, __source: {
                    fileName: _jsxFileName,
                    lineNumber: 251
                  }
                },
                user.pinfoName
              ),
              _react2.default.createElement(
                _reactNative.Text,
                { style: { fontSize: _StyleConfig2.default.fontSize.size_14, color: "#686f74" }, __source: {
                    fileName: _jsxFileName,
                    lineNumber: 252
                  }
                },
                user.pinfoSname
              )
            ) : _react2.default.createElement(
              _reactNative.TouchableOpacity,
              {
                activeOpacity: 1,
                onPress: _lodash2.default.throttle(function () {
                  return _this5.props.navigation.navigate("Login");
                }, 1000, {

                  'trailing': false
                }),
                style: { flexDirection: 'column', justifyContent: 'center', alignItems: 'center' }, __source: {
                  fileName: _jsxFileName,
                  lineNumber: 253
                }
              },
              _react2.default.createElement(_reactNative.Image, {
                style: { height: 65, width: 65, borderRadius: 65 / 2 }, source: require('../static/images/avatar.png'), __source: {
                  fileName: _jsxFileName,
                  lineNumber: 259
                }
              }),
              _react2.default.createElement(
                _reactNative.Text,
                { style: { marginVertical: 8, fontSize: _StyleConfig2.default.fontSize.size_14, color: '#fff' }, __source: {
                    fileName: _jsxFileName,
                    lineNumber: 260
                  }
                },
                '\u7ACB\u5373\u767B\u5F55'
              )
            )
          ),
          this.renderPayItem(PayList),
          this.renderLinkItem(LinkList)
        ) : _react2.default.createElement(_LoadingImg2.default, { isModal: this.state.isLoading, __source: {
            fileName: _jsxFileName,
            lineNumber: 264
          }
        })
      );
    }
  }]);
  return Me;
}(_react2.default.Component);

Me.navigationOptions = {
  tabBarLabel: '我的',

  tabBarIcon: function tabBarIcon(_ref) {
    var tintColor = _ref.tintColor;
    return _react2.default.createElement(_reactNative.Image, {
      source: require('../static/images/me.png'),
      style: { tintColor: tintColor, height: 26,
        width: 26 },
      __source: {
        fileName: _jsxFileName,
        lineNumber: 28
      }
    });
  }
};
exports.default = Me;